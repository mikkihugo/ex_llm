{
  "id": "nextjs",
  "name": "Next.js",
  "version": "1.0.0",
  "category": "fullstack_framework",
  "extends": "framework/react.json",
  "detect": {
    "configFiles": ["next.config.js", "next.config.mjs", "next.config.ts"],
    "lockFiles": ["package-lock.json", "yarn.lock", "pnpm-lock.yaml"],
    "directoryPatterns": ["pages/", "app/", ".next/"],
    "fileExtensions": [".jsx", ".tsx"],
    "npmDependencies": ["next"],
    "excludedNpmDependencies": [],
    "patterns": [
      "getServerSideProps",
      "getStaticProps",
      "getStaticPaths",
      "getInitialProps",
      "next/router",
      "next/link",
      "next/image",
      "next/head"
    ],
    "importPatterns": [
      "from\\s+['\"]next/",
      "import.*next/"
    ]
  },
  "dev": {
    "command": "next dev",
    "port": 3000,
    "pollingStrategies": [
      {"name": "TCP"}
    ]
  },
  "build": {
    "command": "next build",
    "directory": ".next"
  },
  "commands": {
    "install": "npm install",
    "test": "npm test",
    "lint": "next lint",
    "start": "next start"
  },
  "staticAssetsDirectory": "public",
  "env": {
    "NEXT_TELEMETRY_DISABLED": "1"
  },
  "confidence": {
    "baseWeight": 0.95,
    "boosts": {
      "app_router": {
        "patterns": ["app/", "layout\\.tsx", "page\\.tsx"],
        "boost": 0.05
      },
      "pages_router": {
        "patterns": ["pages/_app", "pages/_document"],
        "boost": 0.03
      },
      "api_routes": {
        "patterns": ["pages/api/", "app/api/"],
        "boost": 0.02
      }
    }
  },
  "metadata": {
    "ecosystem": "npm",
    "packageManager": "npm",
    "typicalStructure": ["pages/", "app/", "public/", "styles/", "components/", ".next/"],
    "homepage": "https://nextjs.org",
    "repository": "vercel/next.js"
  },
  "llm": {
    "trigger": {
      "minConfidence": 0.0,
      "maxConfidence": 0.7,
      "conditions": ["no_config_file_found", "ambiguous_detection"]
    },
    "prompts": {
      "detect_routing": "Is this using App Router (app/) or Pages Router (pages/)? What routing patterns are present?",
      "detect_rendering": "What rendering strategy is used? (SSG, SSR, ISR, CSR)",
      "detect_api": "Are API routes being used? What backend patterns are present?",
      "detect_features": "What Next.js features are used? (Image optimization, middleware, server components)"
    },
    "context": {
      "description": "Next.js is a React framework for production with hybrid static & server rendering, TypeScript support, smart bundling, route pre-fetching, and more.",
      "keyFeatures": [
        "File-based routing (pages/ or app/)",
        "Server-side rendering (SSR) with getServerSideProps",
        "Static site generation (SSG) with getStaticProps",
        "API routes for backend endpoints",
        "Image optimization with next/image",
        "Server Components (App Router)"
      ],
      "bestPractices": [
        "Use App Router (app/) for new projects over Pages Router",
        "Leverage Server Components for better performance",
        "Use next/image for automatic image optimization",
        "Implement proper data fetching (SSR/SSG/ISR based on needs)",
        "Use TypeScript for type safety",
        "Configure proper caching strategies"
      ],
      "commonMistakes": [
        "Fetching data client-side when SSR/SSG would be better",
        "Not using Image component for optimization",
        "Mixing App Router and Pages Router patterns",
        "Over-using getServerSideProps (slow)",
        "Not implementing proper loading states"
      ]
    },
    "snippets": {
      "server_component": {
        "description": "Next.js 13+ Server Component with async data fetching",
        "code": "// app/page.tsx\nasync function getData() {\n  const res = await fetch('https://api.example.com/data', {\n    cache: 'no-store' // or 'force-cache'\n  });\n  return res.json();\n}\n\nexport default async function Page() {\n  const data = await getData();\n  return <main>{data.title}</main>;\n}",
        "language": "typescript",
        "patterns": ["async function", "Server Component", "app/"],
        "bestPractice": true,
        "useCase": "server-side data fetching in App Router",
        "githubExamples": [
          "https://github.com/vercel/next.js/tree/canary/examples/app-dir-mdx"
        ]
      },
      "static_generation": {
        "description": "Static Site Generation with getStaticProps",
        "code": "// pages/blog/[slug].tsx\nexport async function getStaticProps({ params }) {\n  const post = await getPost(params.slug);\n  return { props: { post }, revalidate: 60 };\n}\n\nexport async function getStaticPaths() {\n  const posts = await getAllPosts();\n  return {\n    paths: posts.map(p => ({ params: { slug: p.slug } })),\n    fallback: 'blocking'\n  };\n}\n\nexport default function BlogPost({ post }) {\n  return <article>{post.content}</article>;\n}",
        "language": "typescript",
        "patterns": ["getStaticProps", "getStaticPaths", "ISR"],
        "bestPractice": true,
        "useCase": "static generation with ISR"
      },
      "api_route": {
        "description": "API Route handler",
        "code": "// pages/api/users.ts\nimport type { NextApiRequest, NextApiResponse } from 'next';\n\nexport default async function handler(\n  req: NextApiRequest,\n  res: NextApiResponse\n) {\n  if (req.method === 'GET') {\n    const users = await db.users.findMany();\n    res.status(200).json(users);\n  } else {\n    res.status(405).json({ error: 'Method not allowed' });\n  }\n}",
        "language": "typescript",
        "patterns": ["NextApiRequest", "NextApiResponse", "api/"],
        "useCase": "backend API endpoints"
      },
      "middleware": {
        "description": "Next.js Middleware for authentication/redirects",
        "code": "// middleware.ts\nimport { NextResponse } from 'next/server';\nimport type { NextRequest } from 'next/server';\n\nexport function middleware(request: NextRequest) {\n  const token = request.cookies.get('token');\n  \n  if (!token && request.nextUrl.pathname.startsWith('/dashboard')) {\n    return NextResponse.redirect(new URL('/login', request.url));\n  }\n  \n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: '/dashboard/:path*'\n};",
        "language": "typescript",
        "patterns": ["middleware", "NextRequest", "NextResponse"],
        "bestPractice": true,
        "useCase": "auth guards and redirects"
      }
    },
    "facts": {
      "githubRepos": [
        "vercel/next.js",
        "vercel/next-learn",
        "shadcn/taxonomy",
        "steven-tey/precedent"
      ],
      "documentation": [
        "https://nextjs.org/docs",
        "https://nextjs.org/learn"
      ],
      "relatedTechnologies": {
        "state_management": ["zustand", "jotai", "redux-toolkit"],
        "styling": ["tailwindcss", "styled-components", "emotion"],
        "ui_libraries": ["@shadcn/ui", "@mui/material", "chakra-ui"],
        "data_fetching": ["react-query", "swr", "apollo-client"],
        "orm": ["prisma", "drizzle-orm"],
        "deployment": ["vercel", "netlify", "railway"]
      }
    }
  }
}
