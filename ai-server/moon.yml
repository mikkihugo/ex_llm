$schema: '../.moon/cache/schemas/project.json'

language: 'typescript'
type: 'application'

tasks:
  deps:
    command: 'nix develop ..#dev --command just ai-server-deps'
    inputs:
      - 'package.json'
      - 'bun.lock'
    outputs:
      - 'node_modules/'

  test:
    command: 'nix develop ..#dev --command just ai-server-test'
    deps:
      - 'deps'
    inputs:
      - 'src/**'
      - 'test/**'
      - 'package.json'

  check:
    deps:
      - 'test'