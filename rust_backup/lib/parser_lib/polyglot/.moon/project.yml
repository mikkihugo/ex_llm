type: 'library'
language: 'rust'

project:
  name: '@singularity/universal_parser'
  description: 'Tree-sitter based multi-language parser (30+ languages)'

tags: ['rust', 'parser', 'tree-sitter', 'ast']

fileGroups:
  sources:
    - 'src/**/*'
    - 'Cargo.toml'
  tests:
    - 'tests/**/*'

tasks:
  build:
    command: 'cargo build --release'
    inputs:
      - '@globs(sources)'
    outputs:
      - 'target/release/libuniversal_parser.a'

  test:
    command: 'cargo test'
    inputs:
      - '@globs(sources)'
      - '@globs(tests)'

  clippy:
    command: 'cargo clippy -- -D warnings'
    inputs:
      - '@globs(sources)'
