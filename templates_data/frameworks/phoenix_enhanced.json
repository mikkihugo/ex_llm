{
  "name": "Phoenix Framework",
  "category": "framework",
  "version": "2.0",
  "detector_signatures": {
    "package_names": [
      "phoenix",
      "phoenix_html",
      "phoenix_live_view"
    ],
    "file_extensions": [
      ".ex",
      ".exs",
      ".heex",
      ".leex"
    ],
    "patterns": [
      "use Phoenix\\.Controller",
      "use Phoenix\\.Endpoint",
      "use Phoenix\\.Router",
      "use Phoenix\\.LiveView",
      "use Phoenix\\.Component",
      "Phoenix\\.Socket",
      "defmodule.*Web\\..*Controller"
    ],
    "config_files": [
      "config/config.exs",
      "config/dev.exs",
      "config/prod.exs",
      "mix.exs"
    ],
    "directory_patterns": [
      "lib/*_web/",
      "lib/*_web/controllers/",
      "lib/*_web/live/",
      "assets/"
    ],
    "dependencies": {
      "file": "mix.exs",
      "section": "deps",
      "common_packages": [
        "phoenix",
        "phoenix_ecto",
        "phoenix_html",
        "phoenix_live_view",
        "phoenix_live_dashboard",
        "gettext"
      ]
    }
  },
  "framework_hints": {
    "phoenix_liveview": {
      "patterns": [
        "use Phoenix\\.LiveView",
        "live_render",
        "~L\"\"\"",
        "~H\"\"\""
      ],
      "config_files": [
        "assets/js/app.js"
      ],
      "confidence_boost": 0.4
    },
    "phoenix_channels": {
      "patterns": [
        "use Phoenix\\.Channel",
        "Phoenix\\.Socket",
        "socket\\(",
        "channel\\("
      ],
      "confidence_boost": 0.3
    },
    "ecto": {
      "patterns": [
        "Ecto\\.Schema",
        "Ecto\\.Changeset",
        "Ecto\\.Repo"
      ],
      "dependencies": [
        "phoenix_ecto",
        "ecto_sql"
      ],
      "confidence_boost": 0.2
    }
  },
  "build_commands": {
    "install": "mix deps.get",
    "setup": "mix setup",
    "build": "mix compile",
    "dev": "mix phx.server",
    "test": "mix test",
    "assets": "mix assets.deploy"
  },
  "output_directories": [
    "_build/",
    "priv/static/",
    "deps/"
  ],
  "framework_type": "fullstack",
  "confidence_weight": 0.95,
  "metadata": {
    "ecosystem": "hex",
    "package_manager": "mix",
    "language": "elixir",
    "typical_structure": [
      "lib/",
      "lib/*_web/",
      "test/",
      "priv/",
      "assets/",
      "config/"
    ]
  },
  "detection_rules": {
    "npm_like_detection": {
      "check_mix_exs": {
        "pattern": "defp\\s+deps\\s+do",
        "extract_deps": "\\{:phoenix,.*?\\}",
        "confidence_if_found": 0.9
      },
      "check_endpoint": {
        "file_pattern": "lib/*_web/endpoint.ex",
        "content_pattern": "use Phoenix\\.Endpoint",
        "confidence_if_found": 0.95
      },
      "check_router": {
        "file_pattern": "lib/*_web/router.ex",
        "content_pattern": "use Phoenix\\.Router",
        "confidence_if_found": 0.9
      },
      "check_application": {
        "file_pattern": "lib/*/application.ex",
        "content_pattern": "Phoenix\\.PubSub|.*Endpoint",
        "confidence_if_found": 0.8
      }
    },
    "multi_signal_detection": {
      "minimum_confidence": 0.7,
      "signals": [
        {
          "type": "dependency",
          "weight": 0.3,
          "check": "phoenix in mix.exs"
        },
        {
          "type": "file_structure",
          "weight": 0.2,
          "check": "lib/*_web/ directory exists"
        },
        {
          "type": "code_pattern",
          "weight": 0.3,
          "check": "use Phoenix.* patterns found"
        },
        {
          "type": "config",
          "weight": 0.2,
          "check": "Phoenix config in config.exs"
        }
      ]
    }
  },
  "llm_support": {
    "analysis_prompts": {
      "detect_live_view": "Is this a Phoenix LiveView application? Check for LiveView modules and ~H sigils.",
      "detect_api_mode": "Is this a Phoenix API-only app or full-stack? Check for Phoenix.HTML presence.",
      "detect_channels": "Are Phoenix Channels/WebSockets being used? Look for Channel modules.",
      "detect_umbrella": "Is this an umbrella project? Check for apps/ directory."
    },
    "prompt_bits": {
      "context": "Phoenix is an Elixir web framework built on the Erlang VM. It provides real-time features via LiveView and Channels, follows MVC patterns, and emphasizes productivity and maintainability.",
      "best_practices": [
        "Use contexts for domain boundaries, not just controllers",
        "Leverage LiveView for real-time UIs instead of heavy JavaScript",
        "Use Ecto changesets for validation and data transformation",
        "Keep controllers thin, business logic in contexts",
        "Use PubSub for process communication, not direct sends"
      ],
      "common_mistakes": [
        "Putting business logic in controllers instead of contexts",
        "Not using Ecto changesets for all data validation",
        "Overusing LiveView when static HTML suffices",
        "Not supervising processes properly",
        "Blocking the request process with long operations"
      ]
    },
    "code_snippets": {
      "liveview_component": {
        "description": "Modern Phoenix LiveView component",
        "code": "defmodule MyAppWeb.DashboardLive do\n  use MyAppWeb, :live_view\n\n  def mount(_params, _session, socket) do\n    if connected?(socket) do\n      MyAppWeb.Endpoint.subscribe(\"updates\")\n    end\n    {:ok, assign(socket, data: load_data())}\n  end\n\n  def handle_event(\"refresh\", _, socket) do\n    {:noreply, assign(socket, data: load_data())}\n  end\n\n  def handle_info(%{event: \"update\"}, socket) do\n    {:noreply, assign(socket, data: load_data())}\n  end\n\n  def render(assigns) do\n    ~H\"\"\"\n    <div>\n      <h1>Dashboard</h1>\n      <button phx-click=\"refresh\">Refresh</button>\n    </div>\n    \"\"\"\n  end\nend",
        "patterns": [
          "LiveView",
          "PubSub",
          "real-time updates"
        ],
        "best_practice": true
      },
      "context_module": {
        "description": "Phoenix context for business logic",
        "code": "defmodule MyApp.Catalog do\n  import Ecto.Query\n  alias MyApp.Repo\n  alias MyApp.Catalog.Product\n\n  def list_products(params \\\\ %{}) do\n    Product\n    |> apply_filters(params)\n    |> Repo.all()\n  end\n\n  def create_product(attrs) do\n    %Product{}\n    |> Product.changeset(attrs)\n    |> Repo.insert()\n  end\n\n  defp apply_filters(query, params) do\n    Enum.reduce(params, query, fn\n      {:category, cat}, q -> where(q, category: ^cat)\n      _, q -> q\n    end)\n  end\nend",
        "patterns": [
          "context",
          "Ecto",
          "domain logic"
        ],
        "use_case": "business logic separation"
      }
    },
    "fact_sources": {
      "github_repos": [
        "phoenixframework/phoenix",
        "phoenixframework/phoenix_live_view",
        "elixir-ecto/ecto",
        "dashbitco/broadway"
      ],
      "documentation": [
        "https://hexdocs.pm/phoenix/",
        "https://hexdocs.pm/phoenix_live_view/"
      ],
      "common_packages": {
        "database": [
          "ecto",
          "ecto_sql",
          "postgrex"
        ],
        "frontend": [
          "phoenix_html",
          "phoenix_live_view",
          "esbuild"
        ],
        "auth": [
          "pow",
          "guardian",
          "phx_gen_auth"
        ],
        "api": [
          "absinthe",
          "cors_plug"
        ],
        "testing": [
          "wallaby",
          "hound",
          "ex_machina"
        ]
      }
    }
  },
  "parent_pattern": null
}