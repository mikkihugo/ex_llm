{
  "id": "microservices_saga",
  "name": "Microservices with Saga Pattern",
  "category": "architecture",
  "version": "1.0.0",
  "description": "Microservices architecture using Saga pattern for distributed transaction coordination. Sagas implement long-running transactions as sequences of local transactions coordinated through events.",
  "parent_pattern": "microservices",
  "aliases": ["Saga-based Microservices", "Distributed Sagas"],
  "saga_types": [
    {
      "type": "orchestration",
      "description": "Central orchestrator directs each step (e.g., Temporal, Cadence)"
    },
    {
      "type": "choreography",
      "description": "Each service listens to events and decides next action"
    }
  ],
  "indicators": [
    {
      "name": "multiple_independent_services",
      "description": "4+ microservices",
      "weight": 0.95,
      "required": true
    },
    {
      "name": "saga_orchestrator_or_event_chain",
      "description": "Orchestrator service OR event-driven choreography",
      "weight": 0.9,
      "required": true
    },
    {
      "name": "compensating_transactions",
      "description": "Rollback/compensation logic for saga failures",
      "weight": 0.85,
      "required": true
    },
    {
      "name": "saga_definitions",
      "description": "Explicit saga definitions (Temporal workflows, state machines)",
      "weight": 0.8,
      "required": true
    }
  ],
  "benefits": [
    "Distributed transactions without 2PC (better availability)",
    "Explicit failure handling and compensation",
    "Clear business process visibility",
    "Can handle long-running processes gracefully",
    "Independent service scaling"
  ],
  "concerns": [
    "Complex to understand and debug",
    "Eventual consistency (eventual success with compensation)",
    "Compensating transaction complexity",
    "Testing distributed sagas is difficult",
    "Operational overhead (saga monitoring, rollbacks)"
  ],
  "when_to_use": [
    "Distributed transactions across microservices",
    "Long-running business processes",
    "Need for explicit compensation logic",
    "High availability more important than strong consistency"
  ],
  "when_not_to_use": [
    "Simple CRUD operations",
    "Tight consistency requirements",
    "Small number of services"
  ],
  "required_practices": [
    {
      "practice": "Saga Definition Language",
      "priority": "REQUIRED",
      "description": "Explicit saga definitions (Temporal, Cadence, custom DSL)"
    },
    {
      "practice": "Idempotency",
      "priority": "REQUIRED",
      "description": "All saga steps must be idempotent"
    },
    {
      "practice": "Compensation Logic",
      "priority": "REQUIRED",
      "description": "Implement reversible operations"
    },
    {
      "practice": "Saga Monitoring",
      "priority": "REQUIRED",
      "description": "Track saga execution and failures"
    }
  ],
  "tools_and_frameworks": [
    "Temporal",
    "Cadence",
    "Apache Camel",
    "Akka",
    "NATS (choreography-based)"
  ],
  "llm_team_validation": {
    "validated": true,
    "consensus_score": 83,
    "validated_by": ["claude-opus", "gpt-4.1", "gemini-2.5-pro", "claude-sonnet", "gpt-5-mini"],
    "validation_date": "2025-10-25",
    "approved": true
  },
  "metadata": {
    "created_at": "2025-10-25",
    "version": "1.0.0",
    "detection_template": "detect-microservices-saga.lua"
  }
}
