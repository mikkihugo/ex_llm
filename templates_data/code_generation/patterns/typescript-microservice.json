{
  "id": "typescript-microservice-generator",
  "name": "TypeScript Microservice Generator",
  "description": "Generates TypeScript microservices using AI signatures optimized for LLM coders",
  "steps": [
    {
      "name": "sparc-phase-1-research",
      "operation": {
        "type": "generate",
        "generate": "sparc-research"
      }
    },
    {
      "name": "sparc-phase-2-architecture",
      "operation": {
        "type": "generate",
        "generate": "sparc-architecture"
      }
    },
    {
      "name": "sparc-phase-3-security",
      "operation": {
        "type": "generate",
        "generate": "sparc-security"
      }
    },
    {
      "name": "sparc-phase-4-performance",
      "operation": {
        "type": "generate",
        "generate": "sparc-performance"
      }
    },
    {
      "name": "sparc-phase-5-implementation",
      "operation": {
        "type": "generate",
        "generate": "typescript-microservice"
      }
    }
  ],
  "metadata": {
    "version": "1.0.0",
    "author": "SPARC Team",
    "created_at": "2024-01-15T10:00:00Z",
    "updated_at": "2024-01-15T10:00:00Z",
    "tags": [
      "typescript",
      "microservice",
      "dspy",
      "llm-coder",
      "code-generation"
    ],
    "performance": {
      "avg_execution_time_ms": 120.0,
      "memory_usage_bytes": 2621440,
      "complexity": 7
    }
  },
  "ai_signature": {
    "name": "typescript_microservice_generator",
    "inputs": {
      "business_domain": "The business domain context (e.g., e-commerce, finance)",
      "entity_name": "The entity name in camelCase (e.g., user, product)",
      "framework": "Framework (express, fastify, koa)",
      "database": "Database type (postgresql, mongodb, sqlite)",
      "security_level": "Security requirements (low, medium, high)",
      "performance_profile": "Performance characteristics (low-latency, high-throughput)"
    },
    "outputs": {
      "typescript_code": "Generated TypeScript microservice code with annotations",
      "package_json": "Package.json with dependencies",
      "tests": "Generated test code",
      "documentation": "Code documentation and comments"
    },
    "instruction": "Generate a complete TypeScript microservice with business domain annotations, security validation, performance optimization, error handling, logging, and comprehensive tests. The code should be production-ready and optimized for LLM coders."
  },
  "template_content": "/**\n * @business-domain {{business_domain}}\n * @architecture-pattern microservice\n * @architecture-layer business-logic\n * @security-level {{security_level}}\n * @performance-profile {{performance_profile}}\n * @quality-level production-ready\n * @dspy-signature typescript_microservice_generator\n * @llm-coder-optimized true\n */\n\nimport { Request, Response, NextFunction } from 'express';\nimport { z } from 'zod';\nimport { v4 as uuidv4 } from 'uuid';\nimport { Logger } from 'winston';\n\n/**\n * @business-entity {{entityName}}\n * @architecture-component {{framework}}\n * @security-pattern authentication\n * @performance-optimization connection-pooling\n */\nexport interface {{EntityName}} {\n  /** @business-field {{entityName}}Id @security-validation input-sanitization */\n  id: string;\n  name: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n/**\n * @business-entity {{EntityName}}Data\n * @security-pattern data-transfer-object\n * @dspy-output typescript_code: dto_definition\n */\nexport interface {{EntityName}}Data {\n  /** @business-field {{entityName}}Name @security-validation input-sanitization */\n  name: string;\n}\n\n/**\n * @business-entity {{EntityName}}CreateRequest\n * @architecture-pattern request-dto\n * @security-pattern data-transfer-object\n */\nexport const {{EntityName}}CreateRequestSchema = z.object({\n  name: z.string().min(1).max(255),\n});\n\nexport type {{EntityName}}CreateRequest = z.infer<typeof {{EntityName}}CreateRequestSchema>;\n\n/**\n * @business-operation create{{EntityName}}\n * @architecture-pattern repository\n * @security-operation {{security_level}}\n * @performance-metric latency\n * @dspy-output typescript_code: business_logic\n */\nexport class {{EntityName}}Service {\n  private logger: Logger;\n  \n  constructor(logger: Logger) {\n    this.logger = logger;\n  }\n\n  /**\n   * @business-workflow create{{EntityName}}Workflow\n   * @test-scenario happy-path\n   * @test-scenario error-handling\n   * @dspy-output tests: unit_tests\n   */\n  async create{{EntityName}}(data: {{EntityName}}Data): Promise<{{EntityName}}> {\n    this.logger.info('Creating {{entityName}} with data:', data);\n    \n    // @performance-critical-section\n    // @security-validation input-sanitization\n    const {{entityName}}: {{EntityName}} = {\n      id: uuidv4(),\n      name: data.name,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n    };\n    \n    // @performance-bottleneck database-queries\n    // @security-audit sql-injection-check\n    await this.repository.save({{entityName}});\n    \n    return {{entityName}};\n  }\n  \n  /**\n   * @business-operation get{{EntityName}}ById\n   * @architecture-pattern repository\n   * @security-operation data-retrieval\n   * @performance-critical-section\n   */\n  async get{{EntityName}}ById(id: string): Promise<{{EntityName}} | null> {\n    this.logger.info('Getting {{entityName}} by id:', id);\n    \n    // @security-validation input-sanitization\n    return await this.repository.findById(id);\n  }\n  \n  /**\n   * @business-operation getAll{{EntityName}}s\n   * @architecture-pattern repository\n   * @security-operation data-retrieval\n   * @performance-critical-section\n   */\n  async getAll{{EntityName}}s(limit: number = 100, offset: number = 0): Promise<{{EntityName}}[]> {\n    this.logger.info('Getting all {{entityName}}s with limit:', limit, 'offset:', offset);\n    \n    return await this.repository.findAll(limit, offset);\n  }\n}\n\n/**\n * @architecture-pattern controller\n * @security-boundary api-gateway\n * @dspy-output typescript_code: controller_impl\n */\nexport class {{EntityName}}Controller {\n  private service: {{EntityName}}Service;\n  private logger: Logger;\n  \n  constructor(service: {{EntityName}}Service, logger: Logger) {\n    this.service = service;\n    this.logger = logger;\n  }\n\n  /**\n   * @business-operation create{{EntityName}}Endpoint\n   * @architecture-pattern controller\n   * @security-operation data-creation\n   * @performance-metric response-time\n   * @test-scenario happy-path\n   * @test-scenario validation-error\n   */\n  async create{{EntityName}}(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      // @security-validation input-sanitization\n      const validatedData = {{EntityName}}CreateRequestSchema.parse(req.body);\n      \n      const {{entityName}} = await this.service.create{{EntityName}}(validatedData);\n      \n      res.status(201).json({\n        success: true,\n        data: {{entityName}},\n        message: '{{EntityName}} created successfully'\n      });\n    } catch (error) {\n      this.logger.error('Error creating {{entityName}}:', error);\n      next(error);\n    }\n  }\n\n  /**\n   * @business-operation get{{EntityName}}Endpoint\n   * @architecture-pattern controller\n   * @security-operation data-retrieval\n   * @performance-metric response-time\n   * @test-scenario happy-path\n   * @test-scenario not-found\n   */\n  async get{{EntityName}}(req: Request, res: Response, next: NextFunction): Promise<void> {\n    try {\n      const { id } = req.params;\n      \n      const {{entityName}} = await this.service.get{{EntityName}}ById(id);\n      \n      if (!{{entityName}}) {\n        return res.status(404).json({\n          success: false,\n          message: '{{EntityName}} not found'\n        });\n      }\n      \n      res.json({\n        success: true,\n        data: {{entityName}}\n      });\n    } catch (error) {\n      this.logger.error('Error getting {{entityName}}:', error);\n      next(error);\n    }\n  }\n}\n\n/**\n * @architecture-pattern router\n * @security-boundary api-gateway\n * @dspy-output routes: api_routes\n */\nexport function create{{EntityName}}Routes(controller: {{EntityName}}Controller) {\n  const router = express.Router();\n  \n  router.post('/', controller.create{{EntityName}}.bind(controller));\n  router.get('/:id', controller.get{{EntityName}}.bind(controller));\n  router.get('/', controller.getAll{{EntityName}}s.bind(controller));\n  \n  return router;\n}\n\n/**\n * @test-scenario happy-path\n * @dspy-output tests: happy_path_test\n */\ndescribe('{{EntityName}}Service', () => {\n  let service: {{EntityName}}Service;\n  let mockLogger: jest.Mocked<Logger>;\n  \n  beforeEach(() => {\n    mockLogger = {\n      info: jest.fn(),\n      error: jest.fn(),\n      warn: jest.fn(),\n      debug: jest.fn(),\n    } as any;\n    \n    service = new {{EntityName}}Service(mockLogger);\n  });\n\n  it('should create {{entityName}} successfully', async () => {\n    const data: {{EntityName}}Data = { name: 'Test {{EntityName}}' };\n    \n    const result = await service.create{{EntityName}}(data);\n    \n    expect(result.name).toBe('Test {{EntityName}}');\n    expect(result.id).toBeDefined();\n    expect(result.createdAt).toBeInstanceOf(Date);\n  });\n\n  it('should handle empty name validation', async () => {\n    const data: {{EntityName}}Data = { name: '' };\n    \n    await expect(service.create{{EntityName}}(data)).rejects.toThrow();\n  });\n});",
  "parent_pattern": null
}